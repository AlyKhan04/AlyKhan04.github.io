"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[51],{51:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(43),s=n(165),l=n(579);function r(){const e=280,t=28,n="".concat("","/models/hcr/model.json"),r=function(){const[e,t]=(0,o.useState)(()=>"undefined"!==typeof window?window.tf:void 0);return(0,o.useEffect)(()=>{if(e)return;const n=document.createElement("script");return n.src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.20.0/dist/tf.min.js",n.async=!0,n.onload=()=>t(window.tf),n.onerror=()=>console.error("Failed to load TensorFlow.js"),document.head.appendChild(n),()=>document.head.removeChild(n)},[e]),e}(),a=(0,o.useRef)(null),i=(0,o.useRef)(!1),[d,c]=(0,o.useState)(16),[u,h]=(0,o.useState)("draw"),[x,m]=(0,o.useState)(null),[f,g]=(0,o.useState)(!0),[p,v]=(0,o.useState)(""),[w,b]=(0,o.useState)(""),j=(0,o.useMemo)(()=>Array.from({length:26},(e,t)=>String.fromCharCode(65+t)),[]);(0,o.useEffect)(()=>{document.title="Handwriting Demo \u2014 Aly's Portfolio"},[]),(0,o.useEffect)(()=>{const t=a.current;if(!t)return;const n=Math.max(1,window.devicePixelRatio||1);t.width=Math.round(e*n),t.height=Math.round(e*n),t.style.width="".concat(e,"px"),t.style.height="".concat(e,"px");const o=t.getContext("2d");o.setTransform(1,0,0,1,0,0),o.scale(n,n),o.fillStyle="white",o.fillRect(0,0,e,e),o.lineCap="round",o.lineJoin="round"},[]),(0,o.useEffect)(()=>{let e=!0;return(async()=>{if(r)try{r.ready&&await r.ready();const t=await r.loadLayersModel(n);if(!e)return;m(t),v("")}catch(t){console.error("Model load failed:",t),e&&v(String((null===t||void 0===t?void 0:t.message)||t))}finally{e&&g(!1)}})(),()=>{e=!1}},[r]);const y=e=>{var t,n,o,s,l,r;const i=a.current.getBoundingClientRect();return{x:(null!==(t=null===(n=e.touches)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.clientX)&&void 0!==t?t:e.clientX)-i.left,y:(null!==(s=null===(l=e.touches)||void 0===l||null===(r=l[0])||void 0===r?void 0:r.clientY)&&void 0!==s?s:e.clientY)-i.top}},N=e=>{e.preventDefault();const{x:t,y:n}=y(e);((e,t)=>{const n=a.current.getContext("2d");i.current=!0,n.strokeStyle="draw"===u?"black":"white",n.lineWidth=d,n.beginPath(),n.moveTo(e,t)})(t,n)},C=e=>{if(!i.current)return;e.preventDefault();const{x:t,y:n}=y(e);((e,t)=>{if(!i.current)return;const n=a.current.getContext("2d");n.lineTo(e,t),n.stroke()})(t,n)},M=e=>{var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),i.current=!1},S=!!x&&!f&&!p;return(0,l.jsx)("section",{className:"relative z-10 text-white py-16 px-4 sm:px-8 lg:px-16 min-h-screen",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-6 flex items-center justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs uppercase text-gray-400",children:"playground"}),(0,l.jsx)("h2",{className:"text-2xl font-semibold",children:"Handwritten Character Recognition"}),(0,l.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Draw at 280\xd7280; we convert to 28\xd728 for the model."})]}),(0,l.jsx)(s.N_,{to:"/playground",className:"text-sm text-orange-400 hover:underline",children:"\u2190 All demos"})]}),(0,l.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"p-5 rounded-xl border border-white/10 bg-white/5 backdrop-blur-md shadow-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Canvas (280\xd7280)"}),(0,l.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,l.jsxs)("span",{className:"px-2 py-1 rounded ".concat(S?"bg-green-500/30":p?"bg-red-500/30":"bg-white/10"),children:["Model: ",p?"Failed":f?"Loading\u2026":"Ready"]}),(0,l.jsxs)("label",{className:"flex items-center gap-2",children:["Brush",(0,l.jsx)("input",{type:"range",min:"6",max:"36",value:d,onChange:e=>c(parseInt(e.target.value,10))})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2",children:["Mode",(0,l.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"bg-white/10 rounded px-2 py-1",children:[(0,l.jsx)("option",{value:"draw",children:"Draw"}),(0,l.jsx)("option",{value:"erase",children:"Erase"})]})]}),(0,l.jsx)("button",{onClick:()=>{const t=a.current.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e,e),b("")},className:"px-3 py-1 rounded bg-white/10 hover:bg-white/20",children:"Clear"}),(0,l.jsx)("button",{onClick:async()=>{var e,n,o;if(!r||!x)return;const s=a.current,l=document.createElement("canvas");l.width=t,l.height=t;const i=l.getContext("2d",{willReadFrequently:!0});i.imageSmoothingEnabled=!0,i.fillStyle="white",i.fillRect(0,0,t,t),i.drawImage(s,0,0,s.width,s.height,0,0,t,t);const{data:d}=i.getImageData(0,0,t,t),c=new Float32Array(784);for(let t=0,r=0;t<d.length;t+=4,r++){const e=(d[t]+d[t+1]+d[t+2])/765;c[r]=1-e}const u=r.tensor4d(c,[1,t,t,1]),h=x.predict(u),m=h.softmax?h.softmax():r.softmax(h),f=await m.data();u.dispose(),null===(e=h.dispose)||void 0===e||e.call(h),null===(n=m.dispose)||void 0===n||n.call(m);const g=f.indexOf(Math.max(...f));b(null!==(o=j[g])&&void 0!==o?o:"#".concat(g))},disabled:!S,className:"px-3 py-1 rounded bg-orange-500/90 hover:bg-orange-500/100 disabled:opacity-50",children:"Predict"})]})]}),(0,l.jsx)("div",{className:"rounded-lg overflow-hidden border border-white/10 bg-white mx-auto select-none",style:{width:e,height:e,touchAction:"none"},onMouseDown:N,onMouseMove:C,onMouseUp:M,onMouseLeave:M,onTouchStart:N,onTouchMove:C,onTouchEnd:M,children:(0,l.jsx)("canvas",{ref:a})}),!S&&p&&(0,l.jsxs)("p",{className:"mt-3 text-xs text-red-300 break-all",children:["Load error: ",p,(0,l.jsx)("br",{}),"Expected at: ",(0,l.jsx)("code",{children:n})]})]}),(0,l.jsxs)("div",{className:"p-5 rounded-xl border border-white/10 bg-white/5 backdrop-blur-md shadow-lg",children:[(0,l.jsx)("h3",{className:"font-semibold mb-3",children:"Prediction"}),(0,l.jsx)("div",{className:"text-5xl font-bold tracking-wider",children:w||"\u2014"})]})]})]})})}}}]);
//# sourceMappingURL=51.2742deac.chunk.js.map